local a,b=Shared.UseResource()if not a then return end;AddStore("MENUFUNCTIONS")local c;RegisterNetEvent('lib:TriggerMenuEvent',function(d)local e=d.args or{}local f=d.resource;if d.id=="goBack"then if not c then return print("No previous menu to go back to.")end;local g=c[#c]c[#c]=nil;return b:openMenu(g)end;for h=1,#(STORE.MENUFUNCTIONS[f]or{})do local i=STORE.MENUFUNCTIONS[f][h]if i.id==d.id then i.func(e)break end end end)local j=function(k,i)local l={}l[#l+1]={header=i.title,isMenuHeader=true}for h=1,#(i.options or{})do local m=i.options[h]local n=function(d)if i.goBack then c[#c+1]=l else c={l}end;if m.serverEvent then TriggerServerEvent(m.serverEvent,d)end;if m.event then TriggerEvent(m.event,d)end;if m.onSelect then m.onSelect(d)end end;local o=("%s:%s:%d"):format(i.id,m.title,h)AddToStore("MENUFUNCTIONS",k,{id=o,func=n})local p={header=m.title,txt=m.description,icon=m.icon,disabled=m.disabled or m.readOnly,params={isServer=false,event='lib:TriggerMenuEvent',args={id=o,resource=k,args=m.args}}}l[#l+1]=p end;if i.goBack then l[#l+1]={header="Go back",icon="fas fa-arrow-left",params={isServer=false,event='lib:TriggerMenuEvent',args={id="goBack",resource=k,args={}}}}end;return l end;Client.Menu=function(k,i)if not(i.id and i.title)then return print("Menu requires an id and title.")end;b:openMenu(j(k,i))end